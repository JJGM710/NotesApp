(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{155:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),u=a(4),i=a(5),l=a.n(i),s=a(7),m=a(11),d=a(14),p=a(6),f=a(28),b=a(2),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(m.a)(t,2),r=a[0],c=a[1],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},u=function(e){var t=e.target;c(Object(b.a)(Object(b.a)({},r),{},Object(f.a)({},t.name,t.value)))};return{formValues:r,handleInputChange:u,reset:o}},g="[Auth] Login",v="[Auth] Logout",E="[UI] Set error",j="[UI] Remove error",_="[UI] Redirect error",O="[UI] Remove Redirect error",y="[UI] Start Loading",N="[UI] Finish Loading",w="[Notes] New Note",k="[Notes] Set Active Note",x="[Notes] Load Note",S="[Notes] Update note",C="[Notes] Delete note",I="[Notes] Logout Cleaning",L="[Notes] Entries Add",U=a(22),A=a.n(U);a(72),a(76);A.a.initializeApp({apiKey:"AIzaSyBz3QnOZZVyF0qlxFt3-KIlav6XgKhbiSk",authDomain:"react-app-course-409ba.firebaseapp.com",databaseURL:"https://react-app-course-409ba.firebaseio.com",projectId:"react-app-course-409ba",storageBucket:"react-app-course-409ba.appspot.com",messagingSenderId:"153096746563",appId:"1:153096746563:web:af7d96c53ce407f3d906f6"});var D=A.a.firestore(),P=new A.a.auth.GoogleAuthProvider,R=function(e){return{type:E,payload:e}},F=function(){return{type:j}},V=function(){return{type:O}},z=function(){return{type:y}},B=function(){return{type:N}},T=a(15),q=a.n(T),W=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.collection("".concat(t,"/journal/notes")).orderBy("date","desc").get();case 2:return a=e.sent,n=[],a.forEach((function(e){n.push(Object(b.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:return a=e.sent,n=a.length,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/hadesdev/upload",(a=new FormData).append("upload_preset","react-journal"),a.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/hadesdev/upload",{method:"POST",body:a});case 7:if(!(n=e.sent).ok){e.next=15;break}return e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.abrupt("return",null);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(4),e.t0;case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),K=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e);case 2:r=t.sent,a(M(r));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},X=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e);case 2:r=t.sent,a($(r)),console.log(r);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a,n){var r,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.uid,c=n().notes.active,e.url||delete e.url,delete(o=Object(b.a)({},e)).id,o.update=(new Date).getTime(),t.next=8,D.doc("".concat(r,"/journal/notes/").concat(e.id)).update(o);case 8:c.update=o.update,a(Q(e.id,o)),q.a.fire("Saved",e.title,"success");case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},H=function(e,t){return{type:k,payload:Object(b.a)({id:e},t)}},M=function(e){return{type:x,payload:e}},Q=function(e,t){return{type:S,payload:{id:e,note:Object(b.a)({id:e},t)}}},Y=function(e,t){return{type:w,payload:Object(b.a)({id:e},t)}},$=function(e){return{type:L,payload:e}},ee=function(e){return{type:C,payload:e}},te=function(e,t){return{type:g,payload:{uid:e,displayName:t}}},ae=function(){return{type:v}},ne=r.a.memo((function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui})).loading,a=Object(u.c)((function(e){return e.auth})).logout,c=Object(n.useState)(),o=Object(m.a)(c,2),i=o[0],l=o[1];Object(n.useEffect)((function(){return l("animate__animated animate__fadeInUp animate__faster"),function(){!1===a&&e(F())}}),[e,a]);var s=h({email:"",password:""}),p=s.formValues,f=s.handleInputChange,b=p.email,g=p.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Login"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log("login"),e(function(e,t){return function(a){return a(z()),A.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;a(te(t.uid,t.displayName)),a(B()),q.a.fire("Logeed IN!","User Auth Correct","success")})).catch((function(e){q.a.fire("Error",e.message,"error"),a(B())}))}}(b,g))},className:i},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",className:"auth__input",value:b,onChange:f}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",className:"auth__input mt-3",autoComplete:"current-password",value:g,onChange:f}),r.a.createElement("button",{type:"submit",className:"btn btn-success btn-block mt-2",disabled:t},"Login"),r.a.createElement("div",{className:"auth__social-networks"},r.a.createElement("p",null,"Login with Social Networks "),r.a.createElement("div",{className:"google-btn",onClick:function(){e((function(e){A.a.auth().signInWithPopup(P).then((function(t){var a=t.user;e(te(a.uid,a.displayName))}))}))}},r.a.createElement("div",{className:"google-icon-wrapper"},r.a.createElement("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})),r.a.createElement("p",{className:"btn-text"},r.a.createElement("b",null,"Sign in with google")))),r.a.createElement(d.b,{to:"/auth/register",className:"link"},"Create new account")))})),re=a(58),ce=a.n(re),oe=r.a.memo((function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui})).loading,a=h({name:"Juan",email:"juangiler7@outlook.com",password:"123456",password2:"123456"}),c=a.formValues,o=a.handleInputChange,i=c.name,m=c.email,p=c.password,f=c.password2;Object(n.useEffect)((function(){return e(V()),e(F()),function(){e(F())}}),[e]);var b=function(){return 0===i.trim().length?(e(R("Name is Required")),!1):ce.a.isEmail(m)?p!==f||p.length<5?(e(R("Password Should be at 6 and match")),!1):(e(F()),!0):(e(R("Enter valid Email")),!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Register"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),b()&&e(function(e,t,a){return function(n){return n(z()),A.a.auth().createUserWithEmailAndPassword(t,a).then(function(){var t=Object(s.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.user,t.next=3,r.updateProfile({displayName:e});case 3:console.log(r.displayName),n(te(r.uid,r.displayName)),n(B());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){n(B()),q.a.fire("Error",e.message,"error")}))}}(i,m,p))},className:"animate__animated animate__fadeInUp animate__faster"},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",className:"auth__input mt-5",value:i,onChange:o}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input mt-5",value:m,onChange:o}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input mt-5",autoComplete:"current-password",value:p,onChange:o}),r.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"password2",className:"auth__input mt-5",autoComplete:"off",value:f,onChange:o}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block mt-1 mb-5",disabled:t},"Register"),r.a.createElement(d.b,{to:"/auth/login",className:"link"},"Already registered?")))})),ue=r.a.memo((function(){var e=Object(u.c)((function(e){return e.ui})).msgError,t=Object(u.c)((function(e){return e.ui})).redirect;return r.a.createElement("div",{className:"auth__main"},r.a.createElement("div",{className:"auth__box-container"},e&&r.a.createElement("div",{className:"auth__alert-info"},e,"!"),t&&r.a.createElement("div",{className:"auth__alert-error"},"Debe iniciar sesion primero!"),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/auth/login",render:function(){return r.a.createElement(ne,null)}}),r.a.createElement(p.b,{path:"/auth/register",render:function(){return r.a.createElement(oe,null)}}),r.a.createElement(p.a,{to:"/auth/login"}))))})),ie=a(37),le=a.n(ie),se=function(e){var t=e.id,a=e.date,n=e.title,c=e.body,o=e.url,i=e.update,l=le()(a);console.log(o,i);var s=Object(u.b)(),m={title:n,body:c,date:a,url:o,update:i},d=function(e,t){return e.length<=t?e:e.slice(0,t)+"..."};return r.a.createElement("div",{className:"journal__entry animate__animated animate__fadeIn",onClick:function(){s(H(t,m))}},o&&r.a.createElement("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(o,")")}}),r.a.createElement("div",{className:"journal__entry-body"},r.a.createElement("p",{className:"journal__entry-title"},d(n,30)),r.a.createElement("p",{className:"journal__entry-content"},d(c,60))),r.a.createElement("div",{className:"journal__entry-date-box"},r.a.createElement("span",null,l.format("dddd")),r.a.createElement("h4",null,l.format("Do"))))},me=function(){var e=Object(u.c)((function(e){return e.notes})).notes;return r.a.createElement("div",{className:"journal__entries "},e.map((function(e){return r.a.createElement(se,Object.assign({key:e.id},e))})))},de=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.auth})).name,a=Object(u.c)((function(e){return e.notes})).config,c=Object(n.useState)(),o=Object(m.a)(c,2),i=o[0],d=o[1];return Object(n.useEffect)((function(){a>0?d(a):0===a&&d("No hay entradas")}),[d,a]),r.a.createElement("aside",{className:"journal__sidebar animate__animated animate__fadeIn animate__faster"},r.a.createElement("div",{className:"journal__sidebar-navbar"},r.a.createElement("h3",{className:"mt-1"},r.a.createElement("i",{className:"fas fa-user-astronaut"}),r.a.createElement("span",null,"  ".concat(t,"  (").concat(i||"Loading...",")"))),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){e(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(R("Has cerrado sesion")),e.next=3,A.a.auth().signOut();case 3:t(V()),t(ae()),t({type:I});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"Logout")),r.a.createElement("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(s.a)(l.a.mark((function e(t,a){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.uid,r={title:"",body:"",date:(new Date).getTime(),url:null,update:null},e.prev=2,e.next=5,D.collection("".concat(n,"/journal/notes")).add(r);case 5:c=e.sent,t(H(c.id,r)),t(X(n)),t(Y(c.id,r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}())}},r.a.createElement("i",{className:"far fa-calendar-plus fa-3x"}),r.a.createElement("p",{className:"mt-1"}," New Entry")),r.a.createElement(me,null))},pe=a(59),fe=a.n(pe),be=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.notes})).active;return r.a.createElement("div",{className:"notes__appbar"},t.update&&r.a.createElement(fe.a,{interval:6e4,fromNow:!0},t.update),r.a.createElement("input",{id:"fileSelector",type:"file",name:"file",style:{display:"none"},onChange:function(t){var a=t.target.files[0];console.log(t),a&&e(function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a,n){var r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().notes.active,q.a.fire({title:"Uploading....",text:"Please wait...",allowOutsideClick:!1,onBeforeOpen:function(){q.a.showLoading()}}),t.next=4,J(e);case 4:c=t.sent,q.a.close(),r.url=c,a(Z(r));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(a))}}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-info",onClick:function(){console.log("picture"),document.querySelector("#fileSelector").click(),document.querySelector("#fileSelector").value=""}},"Picture"),r.a.createElement("button",{className:"btn btn-success ml-1",onClick:function(){e(Z(t))}},"Save")))},he=a(30),ge=function(e){var t=e.url,a=Object(n.useState)(!1),c=Object(m.a)(a,2),o=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,!1===o&&r.a.createElement("div",null,r.a.createElement(he.a,{animation:"grow"}),r.a.createElement(he.a,{animation:"grow"}),r.a.createElement(he.a,{animation:"grow"})),r.a.createElement("div",{className:"animate__animated animate__fadeIn "},r.a.createElement("img",{src:t,alt:"Imagen",className:"notes__image ",onLoad:function(){u(!0)},style:{display:o?"block":"none"}})))},ve=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.notes})).active,a=h({title:t.title,body:t.body,date:t.date,id:t.id}),c=a.formValues,o=a.handleInputChange,i=a.reset,m=Object(n.useRef)(t.id),d=c.body,p=c.title;console.log(c),Object(n.useEffect)((function(){t.id!==m.current&&(i({title:t.title,body:t.body,date:t.date,id:t.id}),m.current=t.id)}),[t,i]),Object(n.useEffect)((function(){e(H(c.id,Object(b.a)({},c)))}),[c,e]);return r.a.createElement("div",{className:"notes__main-content animate__animated animate__zoomIn animate__faster"},r.a.createElement(be,null),r.a.createElement("div",{className:"notes__content"},r.a.createElement("input",{name:"title",type:"text",placeholder:"Some awesome title",className:"notes__title-input",value:p,onChange:o}),r.a.createElement("textarea",{name:"body",className:"notes__textarea",placeholder:"What happened today?",value:d,onChange:o}),t.url&&r.a.createElement(ge,{url:t.url})),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){var a;e((a=t.id,function(){var e=Object(s.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().auth.uid,e.next=3,D.doc("".concat(r,"/journal/notes/").concat(a)).delete();case 3:t(ee(a)),t(X(r));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))}},"Delete"))},Ee=function(){return r.a.createElement("div",{className:"nothing__main-content animate__animated animate__fadeIn animate__faster"},r.a.createElement("p",null,"Select something",r.a.createElement("br",null),"or Create an Entry!"),r.a.createElement("i",{className:"far fa-star fa-4x mt-5"}))},je=function(){var e=Object(u.c)((function(e){return e.notes})).active;return r.a.createElement("div",{className:"journal__main-content"},r.a.createElement(de,null),r.a.createElement("main",null,e?r.a.createElement(ve,{key:e.id}):r.a.createElement(Ee,null)))},_e=a(29),Oe=function(e){var t=e.isLoggedin,a=e.componente,c=Object(_e.a)(e,["isLoggedin","componente"]);return Object(n.useEffect)((function(){return function(){}}),[]),r.a.createElement(p.b,Object.assign({},c,{render:function(e){return t?r.a.createElement(p.a,{to:"/"}):r.a.createElement(a,null)}}))},ye=function(e){var t=e.isLoggedin,a=e.hasLogout,c=e.componente,o=Object(_e.a)(e,["isLoggedin","hasLogout","componente"]),i=Object(u.b)();return Object(n.useEffect)((function(){return!1===a&&i({type:_}),function(){}}),[]),r.a.createElement(p.b,Object.assign({},o,{render:function(e){return t?r.a.createElement(c,e):r.a.createElement(p.a,{to:"/auth/login"})}}))},Ne=function(){var e=Object(u.b)(),t=Object(n.useState)(!0),a=Object(m.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),f=Object(m.a)(i,2),b=f[0],h=f[1],g=Object(n.useState)(!1),v=Object(m.a)(g,2),E=v[0],j=v[1];return Object(n.useEffect)((function(){A.a.auth().onAuthStateChanged(function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===a||void 0===a?void 0:a.uid)?(e(te(a.uid,a.displayName)),e(X(a.uid)),e(K(a.uid)),h(!0),j(!0)):(h(!1),j(!1)),o(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,o]),c?r.a.createElement("h1",null,"Espere....."):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(p.d,null,r.a.createElement(Oe,{isLoggedin:b,path:"/auth",componente:ue}),r.a.createElement(ye,{isLoggedin:b,hasLogout:E,exact:!0,path:"/",componente:je}),r.a.createElement(p.a,{to:"/auth/login"})))))},we=a(16),ke=a(61),xe={loading:!1,msgError:null},Se=a(41),Ce={notes:[],active:null},Ie="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||we.d,Le=Object(we.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{uid:t.payload.uid,name:t.payload.displayName,logout:!1};case v:return{logout:!0};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(b.a)(Object(b.a)({},e),{},{msgError:t.payload});case j:return Object(b.a)(Object(b.a)({},e),{},{msgError:null});case _:return Object(b.a)(Object(b.a)({},e),{},{redirect:!0});case O:return Object(b.a)(Object(b.a)({},e),{},{redirect:!1});case y:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case N:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(b.a)(Object(b.a)({},e),{},{active:Object(b.a)(Object(b.a)({},e.active),t.payload)});case x:return Object(b.a)(Object(b.a)({},e),{},{notes:Object(Se.a)(t.payload)});case S:return Object(b.a)(Object(b.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case w:return Object(b.a)(Object(b.a)({},e),{},{notes:[t.payload].concat(Object(Se.a)(e.notes))});case L:return Object(b.a)(Object(b.a)({},e),{},{config:t.payload});case C:return Object(b.a)(Object(b.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case I:return{notes:[],active:null};default:return e}}}),Ue=Object(we.e)(Le,Ie(Object(we.a)(ke.a))),Ae=function(){return r.a.createElement(u.a,{store:Ue},r.a.createElement(Ne,null))};a(155);o.a.render(r.a.createElement(Ae,null),document.getElementById("root"))},62:function(e,t,a){e.exports=a(156)}},[[62,1,2]]]);
//# sourceMappingURL=main.a061ac47.chunk.js.map