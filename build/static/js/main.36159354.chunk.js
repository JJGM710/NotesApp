(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{155:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),u=a(4),i=a(5),l=a.n(i),s=a(7),d=a(11),m=a(14),p=a(6),f=a(28),b=a(2),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(d.a)(t,2),r=a[0],c=a[1],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},u=function(e){var t=e.target;c(Object(b.a)(Object(b.a)({},r),{},Object(f.a)({},t.name,t.value)))};return{formValues:r,handleInputChange:u,reset:o}},E="[Auth] Login",O="[Auth] Logout",v="[UI] Set error",h="[UI] Remove error",g="[UI] Redirect error",j="[UI] Remove Redirect error",y="[UI] Start Loading",N="[UI] Finish Loading",S="[Notes] New Note",w="[Notes] Set Active Note",C="[Notes] Load Note",T="[Notes] Update note",P="[Notes] Delete note",D="[Notes] Logout Cleaning",k="[Notes] Entries Add",x=a(22),A=a.n(x),L=(a(72),a(76),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_APIKEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTHDOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DATABASEURL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_PROJECTID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STORAGEBUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MESSAGINGSENDERID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_APPID});A.a.initializeApp(L);var I=A.a.firestore(),R=new A.a.auth.GoogleAuthProvider,U=function(e){return{type:v,payload:e}},W=function(){return{type:h}},K=function(){return{type:j}},H=function(){return{type:y}},B=function(){return{type:N}},V=a(15),F=a.n(V),G=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.collection("".concat(t,"/journal/notes")).orderBy("date","desc").get();case 2:return a=e.sent,n=[],a.forEach((function(e){n.push(Object(b.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:return a=e.sent,n=a.length,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/hadesdev/upload",(a=new FormData).append("upload_preset","react-journal"),a.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/hadesdev/upload",{method:"POST",body:a});case 7:if(!(n=e.sent).ok){e.next=15;break}return e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.abrupt("return",null);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(4),e.t0;case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),z=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e);case 2:r=t.sent,a(Q(r));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},M=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e);case 2:r=t.sent,a(ee(r)),console.log(r);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},X=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a,n){var r,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.uid,c=n().notes.active,e.url||delete e.url,delete(o=Object(b.a)({},e)).id,o.update=(new Date).getTime(),t.next=8,I.doc("".concat(r,"/journal/notes/").concat(e.id)).update(o);case 8:c.update=o.update,a(Z(e.id,o)),F.a.fire("Saved",e.title,"success");case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Y=function(e,t){return{type:w,payload:Object(b.a)({id:e},t)}},Q=function(e){return{type:C,payload:e}},Z=function(e,t){return{type:T,payload:{id:e,note:Object(b.a)({id:e},t)}}},$=function(e,t){return{type:S,payload:Object(b.a)({id:e},t)}},ee=function(e){return{type:k,payload:e}},te=function(e){return{type:P,payload:e}},ae=function(e,t){return{type:E,payload:{uid:e,displayName:t}}},ne=function(){return{type:O}},re=r.a.memo((function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui})).loading,a=Object(u.c)((function(e){return e.auth})).logout,c=Object(n.useState)(),o=Object(d.a)(c,2),i=o[0],l=o[1];Object(n.useEffect)((function(){return l("animate__animated animate__fadeInUp animate__faster"),function(){!1===a&&e(W())}}),[e,a]);var s=_({email:"",password:""}),p=s.formValues,f=s.handleInputChange,b=p.email,E=p.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Login"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log("login"),e(function(e,t){return function(a){return a(H()),A.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;a(ae(t.uid,t.displayName)),a(B()),F.a.fire("Logeed IN!","User Auth Correct","success")})).catch((function(e){F.a.fire("Error",e.message,"error"),a(B())}))}}(b,E))},className:i},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",autoComplete:"off",className:"auth__input",value:b,onChange:f}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",className:"auth__input mt-3",autoComplete:"current-password",value:E,onChange:f}),r.a.createElement("button",{type:"submit",className:"btn btn-success btn-block mt-2",disabled:t},"Login"),r.a.createElement("div",{className:"auth__social-networks"},r.a.createElement("p",null,"Login with Social Networks "),r.a.createElement("div",{className:"google-btn",onClick:function(){e((function(e){A.a.auth().signInWithPopup(R).then((function(t){var a=t.user;e(ae(a.uid,a.displayName))}))}))}},r.a.createElement("div",{className:"google-icon-wrapper"},r.a.createElement("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})),r.a.createElement("p",{className:"btn-text"},r.a.createElement("b",null,"Sign in with google")))),r.a.createElement(m.b,{to:"/auth/register",className:"link"},"Create new account")))})),ce=a(58),oe=a.n(ce),ue=r.a.memo((function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui})).loading,a=_({name:"Juan",email:"juangiler7@outlook.com",password:"123456",password2:"123456"}),c=a.formValues,o=a.handleInputChange,i=c.name,d=c.email,p=c.password,f=c.password2;Object(n.useEffect)((function(){return e(K()),e(W()),function(){e(W())}}),[e]);var b=function(){return 0===i.trim().length?(e(U("Name is Required")),!1):oe.a.isEmail(d)?p!==f||p.length<5?(e(U("Password Should be at 6 and match")),!1):(e(W()),!0):(e(U("Enter valid Email")),!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"auth__title"},"Register"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),b()&&e(function(e,t,a){return function(n){return n(H()),A.a.auth().createUserWithEmailAndPassword(t,a).then(function(){var t=Object(s.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.user,t.next=3,r.updateProfile({displayName:e});case 3:console.log(r.displayName),n(ae(r.uid,r.displayName)),n(B());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){n(B()),F.a.fire("Error",e.message,"error")}))}}(i,d,p))},className:"animate__animated animate__fadeInUp animate__faster"},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",className:"auth__input mt-5",value:i,onChange:o}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input mt-5",value:d,onChange:o}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input mt-5",autoComplete:"current-password",value:p,onChange:o}),r.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"password2",className:"auth__input mt-5",autoComplete:"off",value:f,onChange:o}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block mt-1 mb-5",disabled:t},"Register"),r.a.createElement(m.b,{to:"/auth/login",className:"link"},"Already registered?")))})),ie=r.a.memo((function(){var e=Object(u.c)((function(e){return e.ui})).msgError,t=Object(u.c)((function(e){return e.ui})).redirect;return r.a.createElement("div",{className:"auth__main"},r.a.createElement("div",{className:"auth__box-container"},e&&r.a.createElement("div",{className:"auth__alert-info"},e,"!"),t&&r.a.createElement("div",{className:"auth__alert-error"},"Debe iniciar sesion primero!"),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/auth/login",render:function(){return r.a.createElement(re,null)}}),r.a.createElement(p.b,{path:"/auth/register",render:function(){return r.a.createElement(ue,null)}}),r.a.createElement(p.a,{to:"/auth/login"}))))})),le=a(37),se=a.n(le),de=function(e){var t=e.id,a=e.date,n=e.title,c=e.body,o=e.url,i=e.update,l=se()(a);console.log(o,i);var s=Object(u.b)(),d={title:n,body:c,date:a,url:o,update:i},m=function(e,t){return e.length<=t?e:e.slice(0,t)+"..."};return r.a.createElement("div",{className:"journal__entry animate__animated animate__fadeIn",onClick:function(){s(Y(t,d))}},o&&r.a.createElement("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(o,")")}}),r.a.createElement("div",{className:"journal__entry-body"},r.a.createElement("p",{className:"journal__entry-title"},m(n,30)),r.a.createElement("p",{className:"journal__entry-content"},m(c,60))),r.a.createElement("div",{className:"journal__entry-date-box"},r.a.createElement("span",null,l.format("dddd")),r.a.createElement("h4",null,l.format("Do"))))},me=function(){var e=Object(u.c)((function(e){return e.notes})).notes;return r.a.createElement("div",{className:"journal__entries "},e.map((function(e){return r.a.createElement(de,Object.assign({key:e.id},e))})))},pe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.auth})).name,a=Object(u.c)((function(e){return e.notes})).config,c=Object(n.useState)(),o=Object(d.a)(c,2),i=o[0],m=o[1];return Object(n.useEffect)((function(){a>0?m(a):0===a&&m("No hay entradas")}),[m,a]),r.a.createElement("aside",{className:"journal__sidebar animate__animated animate__fadeIn animate__faster"},r.a.createElement("div",{className:"journal__sidebar-navbar"},r.a.createElement("h3",{className:"mt-1"},r.a.createElement("i",{className:"fas fa-user-astronaut"}),r.a.createElement("span",null,"  ".concat(t,"  (").concat(i||"Loading...",")"))),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){e(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(U("Has cerrado sesion")),e.next=3,A.a.auth().signOut();case 3:t(K()),t(ne()),t({type:D});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"Logout")),r.a.createElement("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(s.a)(l.a.mark((function e(t,a){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.uid,r={title:"",body:"",date:(new Date).getTime(),url:null,update:null},e.prev=2,e.next=5,I.collection("".concat(n,"/journal/notes")).add(r);case 5:c=e.sent,t(Y(c.id,r)),t(M(n)),t($(c.id,r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}())}},r.a.createElement("i",{className:"far fa-calendar-plus fa-3x"}),r.a.createElement("p",{className:"mt-1"}," New Entry")),r.a.createElement(me,null))},fe=a(59),be=a.n(fe),_e=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.notes})).active;return r.a.createElement("div",{className:"notes__appbar"},t.update&&r.a.createElement(be.a,{interval:6e4,fromNow:!0},t.update),r.a.createElement("input",{id:"fileSelector",type:"file",name:"file",style:{display:"none"},onChange:function(t){var a=t.target.files[0];console.log(t),a&&e(function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a,n){var r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().notes.active,F.a.fire({title:"Uploading....",text:"Please wait...",allowOutsideClick:!1,onBeforeOpen:function(){F.a.showLoading()}}),t.next=4,q(e);case 4:c=t.sent,F.a.close(),r.url=c,a(X(r));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(a))}}),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-info",onClick:function(){console.log("picture"),document.querySelector("#fileSelector").click(),document.querySelector("#fileSelector").value=""}},"Picture"),r.a.createElement("button",{className:"btn btn-success ml-1",onClick:function(){e(X(t))}},"Save")))},Ee=a(30),Oe=function(e){var t=e.url,a=Object(n.useState)(!1),c=Object(d.a)(a,2),o=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,!1===o&&r.a.createElement("div",null,r.a.createElement(Ee.a,{animation:"grow"}),r.a.createElement(Ee.a,{animation:"grow"}),r.a.createElement(Ee.a,{animation:"grow"})),r.a.createElement("div",{className:"animate__animated animate__fadeIn "},r.a.createElement("img",{src:t,alt:"Imagen",className:"notes__image ",onLoad:function(){u(!0)},style:{display:o?"block":"none"}})))},ve=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.notes})).active,a=_({title:t.title,body:t.body,date:t.date,id:t.id}),c=a.formValues,o=a.handleInputChange,i=a.reset,d=Object(n.useRef)(t.id),m=c.body,p=c.title;console.log(c),Object(n.useEffect)((function(){t.id!==d.current&&(i({title:t.title,body:t.body,date:t.date,id:t.id}),d.current=t.id)}),[t,i]),Object(n.useEffect)((function(){e(Y(c.id,Object(b.a)({},c)))}),[c,e]);return r.a.createElement("div",{className:"notes__main-content animate__animated animate__zoomIn animate__faster"},r.a.createElement(_e,null),r.a.createElement("div",{className:"notes__content"},r.a.createElement("input",{name:"title",type:"text",placeholder:"Some awesome title",className:"notes__title-input",value:p,onChange:o}),r.a.createElement("textarea",{name:"body",className:"notes__textarea",placeholder:"What happened today?",value:m,onChange:o}),t.url&&r.a.createElement(Oe,{url:t.url})),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){var a;e((a=t.id,function(){var e=Object(s.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().auth.uid,e.next=3,I.doc("".concat(r,"/journal/notes/").concat(a)).delete();case 3:t(te(a)),t(M(r));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))}},"Delete"))},he=function(){return r.a.createElement("div",{className:"nothing__main-content animate__animated animate__fadeIn animate__faster"},r.a.createElement("p",null,"Select something",r.a.createElement("br",null),"or Create an Entry!"),r.a.createElement("i",{className:"far fa-star fa-4x mt-5"}))},ge=function(){var e=Object(u.c)((function(e){return e.notes})).active;return r.a.createElement("div",{className:"journal__main-content"},r.a.createElement(pe,null),r.a.createElement("main",null,e?r.a.createElement(ve,{key:e.id}):r.a.createElement(he,null)))},je=a(29),ye=function(e){var t=e.isLoggedin,a=e.componente,c=Object(je.a)(e,["isLoggedin","componente"]);return Object(n.useEffect)((function(){return function(){}}),[]),r.a.createElement(p.b,Object.assign({},c,{render:function(e){return t?r.a.createElement(p.a,{to:"/"}):r.a.createElement(a,null)}}))},Ne=function(e){var t=e.isLoggedin,a=e.hasLogout,c=e.componente,o=Object(je.a)(e,["isLoggedin","hasLogout","componente"]),i=Object(u.b)();return Object(n.useEffect)((function(){return!1===a&&i({type:g}),function(){}}),[]),r.a.createElement(p.b,Object.assign({},o,{render:function(e){return t?r.a.createElement(c,e):r.a.createElement(p.a,{to:"/auth/login"})}}))},Se=function(){var e=Object(u.b)(),t=Object(n.useState)(!0),a=Object(d.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),f=Object(d.a)(i,2),b=f[0],_=f[1],E=Object(n.useState)(!1),O=Object(d.a)(E,2),v=O[0],h=O[1];return Object(n.useEffect)((function(){A.a.auth().onAuthStateChanged(function(){var t=Object(s.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===a||void 0===a?void 0:a.uid)?(e(ae(a.uid,a.displayName)),e(M(a.uid)),e(z(a.uid)),_(!0),h(!0)):(_(!1),h(!1)),o(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e,o]),c?r.a.createElement("h1",null,"Espere....."):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(p.d,null,r.a.createElement(ye,{isLoggedin:b,path:"/auth",componente:ie}),r.a.createElement(Ne,{isLoggedin:b,hasLogout:v,exact:!0,path:"/",componente:ge}),r.a.createElement(p.a,{to:"/auth/login"})))))},we=a(16),Ce=a(61),Te={loading:!1,msgError:null},Pe=a(41),De={notes:[],active:null},ke="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||we.d,xe=Object(we.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{uid:t.payload.uid,name:t.payload.displayName,logout:!1};case O:return{logout:!0};default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(b.a)(Object(b.a)({},e),{},{msgError:t.payload});case h:return Object(b.a)(Object(b.a)({},e),{},{msgError:null});case g:return Object(b.a)(Object(b.a)({},e),{},{redirect:!0});case j:return Object(b.a)(Object(b.a)({},e),{},{redirect:!1});case y:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case N:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(b.a)(Object(b.a)({},e),{},{active:Object(b.a)(Object(b.a)({},e.active),t.payload)});case C:return Object(b.a)(Object(b.a)({},e),{},{notes:Object(Pe.a)(t.payload)});case T:return Object(b.a)(Object(b.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case S:return Object(b.a)(Object(b.a)({},e),{},{notes:[t.payload].concat(Object(Pe.a)(e.notes))});case k:return Object(b.a)(Object(b.a)({},e),{},{config:t.payload});case P:return Object(b.a)(Object(b.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case D:return{notes:[],active:null};default:return e}}}),Ae=Object(we.e)(xe,ke(Object(we.a)(Ce.a))),Le=function(){return r.a.createElement(u.a,{store:Ae},r.a.createElement(Se,null))};a(155);o.a.render(r.a.createElement(Le,null),document.getElementById("root"))},62:function(e,t,a){e.exports=a(156)}},[[62,1,2]]]);
//# sourceMappingURL=main.36159354.chunk.js.map